RewriteEngine On

# Redirect .html URLs to clean URLs (example.com/page.html -> example.com/page)
RewriteCond %{THE_REQUEST} \s/(.*)\.html [NC]
RewriteRule ^(.*)\.html$ /$1 [R=301,L]

# Internally rewrite clean URLs to their .html files (example.com/page -> example.com/page.html)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]

# Deny direct access to .html files
<FilesMatch "\.html$">
    Order Deny,Allow
    Deny from all
</FilesMatch>
